(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02fcfeeb"],{"4b6c":function(t,a,e){"use strict";var i=e("5254"),n=e.n(i);n.a},5254:function(t,a,e){},"73cf":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"register",attrs:{id:"Register"}},[e("div",{staticClass:"rout"},[e("van-nav-bar",{attrs:{title:"注册","left-arrow":""},on:{"click-left":t.onClickLeftr}})],1),e("van-form",{staticClass:"biaod",attrs:{enctype:"multipart/form-data"},on:{submit:t.onSubmit}},[e("div",{staticClass:"head-img"},[e("span",[t._v("头像上传")]),e("div",[e("van-uploader",{attrs:{"after-read":t.afterRead,"max-count":1},model:{value:t.seenFlie,callback:function(a){t.seenFlie=a},expression:"seenFlie"}})],1)]),e("van-field",{style:!t.validEmail&&{color:"red"},attrs:{label:"邮箱",name:"邮箱",placeholder:"请输入邮箱"},model:{value:t.inf.email,callback:function(a){t.$set(t.inf,"email",a)},expression:"inf.email"}}),e("van-field",{style:!t.validnickname&&{color:"red"},attrs:{name:"昵称",label:"昵称",placeholder:"昵称"},model:{value:t.inf.nickname,callback:function(a){t.$set(t.inf,"nickname",a)},expression:"inf.nickname"}}),e("van-field",{style:!t.validPassword&&{color:"red"},attrs:{type:"text",name:"密码",label:"密码",placeholder:"密码"},model:{value:t.inf.password,callback:function(a){t.$set(t.inf,"password",a)},expression:"inf.password"}}),e("van-field",{style:!t.validCode&&{color:"red"},attrs:{center:"",clearable:"",label:"邮箱验证码",placeholder:"邮箱验证码"},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-button",{attrs:{size:"small",disabled:"发送验证码"!=t.sbText,type:"primary"},on:{click:t.getEmalisTitle}},[t._v(t._s(t.sbText))])]},proxy:!0}]),model:{value:t.inf.code,callback:function(a){t.$set(t.inf,"code",a)},expression:"inf.code"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info",disabled:!t.validSubmit,"native-type":"submit"}},[t._v("提交")])],1)],1)],1)},n=[],s={name:"Register",data:function(){return{inf:{email:"",nickname:"",password:"",code:"",img:""},sbText:"发送验证码",seenFlie:[],img:null}},computed:{validEmail:function(){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(this.inf.email)},validnickname:function(){return/^[\w\u4e00-\u9fa5]{1,10}$/.test(this.inf.nickname)},validPassword:function(){return/^[A-Za-z]\w{5,15}$/.test(this.inf.password)},validCode:function(){return/^\d{6}$/.test(this.inf.code)},validSubmit:function(){return this.validEmail&&this.validnickname&&this.validPassword&&this.validCode}},methods:{afterRead:function(t){var a=this;this.img=t.file;var e=new FormData;e.append("file",t.file),this.axios.dataType=!1,this.axios.post("/upfile",e).then((function(t){a.inf.img=t.data.filePath,a.axios.dataType=!0})).catch((function(t){a.axios.dataType=!0}))},onSubmit:function(){var t=this;this.$toast.loading({message:"发送中...",duration:0,forbidClick:!0}),this.axios({method:"POST",url:"/register",data:this.inf}).then((function(a){if(1e3==a.data.code)return t.$toast.success(a.data.msg),void t.$router.push("Singin");t.$toast.fail(a.data.msg)})).catch((function(a){t.$toast.fail("网络错误")}))},getEmalisTitle:function(){var t=this;if(this.validEmail){var a=10;this.sbText=a--+"后再次发送";var e=setInterval((function(){t.sbText=a--+"后再次发送",a<0&&(t.sbText="发送验证码",clearInterval(e))}),1e3);this.$toast.loading({message:"加载中...",duration:0,forbidClick:!0}),this.axios({method:"POST",url:"/sendmail",data:this.inf}).then((function(a){1010!=a.data.code?t.$toast.fail(a.data.msg):t.$toast.success(a.data.msg)})).catch((function(a){t.$toast.fail("网络错误")}))}},onClickLeftr:function(){this.$router.push("Singin")}}},l=s,o=(e("4b6c"),e("2877")),r=Object(o["a"])(l,i,n,!1,null,"5443eef0",null);a["default"]=r.exports}}]);
//# sourceMappingURL=chunk-02fcfeeb.607a6460.js.map