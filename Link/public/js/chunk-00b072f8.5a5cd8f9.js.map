{"version":3,"sources":["webpack:///./src/views/Register.vue?6703","webpack:///./src/views/Register.vue?a672","webpack:///src/views/Register.vue","webpack:///./src/views/Register.vue?a0dd","webpack:///./src/views/Register.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeftr","onSubmit","_v","afterRead","model","value","callback","$$v","seenFlie","expression","style","validEmail","color","inf","$set","validnickname","validPassword","validCode","scopedSlots","_u","key","fn","sbText","getEmalisTitle","_s","proxy","staticStyle","validSubmit","staticRenderFns","name","data","email","nickname","password","code","img","computed","test","methods","file","formData","append","axios","dataType","$toast","loading","message","duration","forbidClick","method","url","ti","clearInterval","tiemr","$router","push","component"],"mappings":"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","file":"js/chunk-00b072f8.5a5cd8f9.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=style&index=0&id=ae806e08&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=style&index=0&id=ae806e08&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"register\",attrs:{\"id\":\"Register\"}},[_c('div',{staticClass:\"rout\"},[_c('van-nav-bar',{attrs:{\"title\":\"注册\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeftr}})],1),_c('van-form',{staticClass:\"biaod\",attrs:{\"enctype\":\"multipart/form-data\"},on:{\"submit\":_vm.onSubmit}},[_c('div',{staticClass:\"head-img\"},[_c('span',[_vm._v(\"头像上传\")]),_c('div',[_c('van-uploader',{attrs:{\"after-read\":_vm.afterRead,\"max-count\":1},model:{value:(_vm.seenFlie),callback:function ($$v) {_vm.seenFlie=$$v},expression:\"seenFlie\"}})],1)]),_c('van-field',{style:(!_vm.validEmail&&{color:'red'}),attrs:{\"label\":\"邮箱\",\"name\":\"邮箱\",\"placeholder\":\"请输入邮箱\"},model:{value:(_vm.inf.email),callback:function ($$v) {_vm.$set(_vm.inf, \"email\", $$v)},expression:\"inf.email\"}}),_c('van-field',{style:(!_vm.validnickname&&{color:'red'}),attrs:{\"name\":\"昵称\",\"label\":\"昵称\",\"placeholder\":\"昵称\"},model:{value:(_vm.inf.nickname),callback:function ($$v) {_vm.$set(_vm.inf, \"nickname\", $$v)},expression:\"inf.nickname\"}}),_c('van-field',{style:(!_vm.validPassword&&{color:'red'}),attrs:{\"type\":\"text\",\"name\":\"密码\",\"label\":\"密码\",\"placeholder\":\"密码\"},model:{value:(_vm.inf.password),callback:function ($$v) {_vm.$set(_vm.inf, \"password\", $$v)},expression:\"inf.password\"}}),_c('van-field',{style:(!_vm.validCode&&{color:'red'}),attrs:{\"center\":\"\",\"clearable\":\"\",\"label\":\"邮箱验证码\",\"placeholder\":\"邮箱验证码\"},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [_c('van-button',{attrs:{\"size\":\"small\",\"disabled\":_vm.sbText!=\"发送验证码\",\"type\":\"primary\"},on:{\"click\":_vm.getEmalisTitle}},[_vm._v(_vm._s(_vm.sbText))])]},proxy:true}]),model:{value:(_vm.inf.code),callback:function ($$v) {_vm.$set(_vm.inf, \"code\", $$v)},expression:\"inf.code\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"disabled\":!_vm.validSubmit,\"native-type\":\"submit\"}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"Register\" class=\"register\">\r\n    <!-- 路由 -->\r\n    <div class=\"rout\">\r\n      <van-nav-bar title=\"注册\" left-arrow @click-left=\"onClickLeftr\" />\r\n    </div>\r\n\r\n    <!-- 表单 -->\r\n    <van-form @submit=\"onSubmit\" enctype=\"multipart/form-data\" class=\"biaod\">\r\n      <div class=\"head-img\">\r\n        <span>头像上传</span>\r\n        <div>\r\n          <van-uploader v-model=\"seenFlie\" :after-read=\"afterRead\" :max-count=\"1\" />\r\n        </div>\r\n      </div>\r\n      <van-field\r\n        v-model=\"inf.email\"\r\n        label=\"邮箱\"\r\n        name=\"邮箱\"\r\n        placeholder=\"请输入邮箱\"\r\n        :style=\"!validEmail&&{color:'red'}\"\r\n      />\r\n      <van-field\r\n        v-model=\"inf.nickname\"\r\n        name=\"昵称\"\r\n        label=\"昵称\"\r\n        placeholder=\"昵称\"\r\n        :style=\"!validnickname&&{color:'red'}\"\r\n      />\r\n      <van-field\r\n        v-model=\"inf.password\"\r\n        type=\"text\"\r\n        name=\"密码\"\r\n        label=\"密码\"\r\n        placeholder=\"密码\"\r\n        :style=\"!validPassword&&{color:'red'}\"\r\n      />\r\n      <van-field\r\n        v-model=\"inf.code\"\r\n        center\r\n        clearable\r\n        label=\"邮箱验证码\"\r\n        placeholder=\"邮箱验证码\"\r\n        :style=\"!validCode&&{color:'red'}\"\r\n      >\r\n        <template #button>\r\n          <van-button\r\n            size=\"small\"\r\n            :disabled=\"sbText!=`发送验证码`\"\r\n            type=\"primary\"\r\n            @click=\"getEmalisTitle\"\r\n          >{{sbText}}</van-button>\r\n        </template>\r\n      </van-field>\r\n      <div style=\"margin: 16px;\">\r\n        <van-button round block type=\"info\" :disabled=\"!validSubmit\" native-type=\"submit\">提交</van-button>\r\n      </div>\r\n    </van-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Register\",\r\n  data() {\r\n    return {\r\n      inf: {\r\n        email: \"\",\r\n        nickname: \"\",\r\n        password: \"\",\r\n        code: \"\",\r\n        img: \"\"\r\n      },\r\n      sbText: \"发送验证码\",\r\n      seenFlie: [],\r\n      img: null\r\n    };\r\n  },\r\n  computed: {\r\n    //格式验证\r\n    //邮箱\r\n    validEmail() {\r\n      return /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/.test(\r\n        this.inf.email\r\n      );\r\n    },\r\n    //昵称\r\n    validnickname() {\r\n      return /^[\\w\\u4e00-\\u9fa5]{1,10}$/.test(this.inf.nickname);\r\n    },\r\n    //密码\r\n    validPassword() {\r\n      return /^[A-Za-z]\\w{5,15}$/.test(this.inf.password);\r\n    },\r\n    //验证码\r\n    validCode() {\r\n      return /^\\d{6}$/.test(this.inf.code);\r\n    },\r\n    //提交按钮\r\n    validSubmit() {\r\n      return (\r\n        this.validEmail &&\r\n        this.validnickname &&\r\n        this.validPassword &&\r\n        this.validCode\r\n      );\r\n    }\r\n  },\r\n  methods: {\r\n    //图片文件\r\n    afterRead(file) {\r\n      // let file = file.file;\r\n      this.img = file.file;\r\n\r\n      let formData = new FormData();\r\n      formData.append(\"file\", file.file);\r\n\r\n      //取消序列化\r\n      this.axios.dataType = false;\r\n\r\n      this.axios\r\n        .post(\"/upfile\", formData)\r\n        .then(requers => {\r\n          this.inf.img = requers.data.filePath;\r\n          this.axios.dataType = true;\r\n        })\r\n        .catch(err => {\r\n          //\r\n          this.axios.dataType = true;\r\n        });\r\n    },\r\n    //注册按钮\r\n    onSubmit() {\r\n      this.$toast.loading({\r\n        message: \"发送中...\",\r\n        duration: 0,\r\n        forbidClick: true\r\n      });\r\n      //发起注册请求\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/register\",\r\n        data: this.inf\r\n      })\r\n        .then(result => {\r\n          if (result.data.code == 1000) {\r\n            //成功\r\n            this.$toast.success(result.data.msg);\r\n            this.$router.push(\"Singin\");\r\n            return;\r\n          }\r\n          //异常\r\n          this.$toast.fail(result.data.msg);\r\n          // this.$router.push(\"Singin\");\r\n        })\r\n        .catch(err => {\r\n          //失败\r\n          this.$toast.fail(\"网络错误\");\r\n        });\r\n    },\r\n    //邮箱验证码按钮\r\n    getEmalisTitle() {\r\n      //时间控制\r\n      let ti = 60;\r\n      this.sbText = ti-- + \"后再次发送\";\r\n      let tiemr = setInterval(() => {\r\n        this.sbText = ti-- + \"后再次发送\";\r\n        if (ti < 0) {\r\n          this.sbText = \"发送验证码\";\r\n          clearInterval(tiemr);\r\n        }\r\n      }, 1000);\r\n\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        duration: 0,\r\n        forbidClick: true\r\n      });\r\n\r\n      //数据传输\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/sendmail\",\r\n        data: this.inf\r\n      })\r\n        .then(result => {\r\n          if (result.data.code == 1010) {\r\n            //成功\r\n            this.$toast.success(result.data.msg);\r\n            return;\r\n          }\r\n          //异常\r\n          this.$toast.fail(result.data.msg);\r\n        })\r\n        .catch(err => {\r\n          //失败\r\n          this.$toast.fail(\"网络错误\");\r\n        });\r\n    },\r\n    //返回登录页\r\n    onClickLeftr() {\r\n      this.$router.push(\"Singin\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.rout {\r\n  position: fixed;\r\n  top: 0px;\r\n  width: 100%;\r\n}\r\n.register {\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  .biaod {\r\n    width: 100%;\r\n  }\r\n  .head-img {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    span {\r\n      display: block;\r\n      // text-align: center;\r\n      width: 75px;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=ae806e08&scoped=true&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Register.vue?vue&type=style&index=0&id=ae806e08&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ae806e08\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}